$(document).ready(function(){	var cart = [];	function displayCart(){		var cartDiv = $("#cartDiv");		cartDiv.html("");        var grandTotal = 0;		for(var item in cart){			var qty = cart[item].qty;			var price = cart[item].price;			var subtotal = qty * price;            grandTotal += subtotal;			cartDiv.append( "<p>" + "<strong>" + cart[item].name + ": </strong>" + "$" +					subtotal.toFixed(2) + "</p>");		}        cartDiv.append( "<p><strong>Grand Total:</strong> $" + grandTotal.toFixed(2) + "</p>");	}	$('div[data-product]').each( function(){	   $(this).append('<button class="btnCart">Add To Cart</button>');	});	$('.btnCart').on("click", function(event){		var pid = $(this).parent().data("product");		if( cart[pid] ){			cart[pid].qty += 1;		} else {			cart[pid] = new Object();			cart[pid].qty = 1;			cart[pid].name = $(this).siblings("span").data("name");			cart[pid].price = $(this).siblings("span").next().data("price");		}		displayCart()	});    var orderUrl = "";    $('#orderNow').on("click", function(event){        for(var item in cart){            orderUrl += "\nPID: " + item + " Name: " + cart[item].name + "&nbsp;";        }        window.location.href = "purchase.php?" + orderUrl;        $.getJSON( 'purchase.php?' + orderUrl, function(data){            $("#cartDiv").append(data);        });        alert(orderUrl + "\n\nYum sounds good, please go to the Order tab to finish.")    });    var order = orderUrl;    $('#saveOrder').on("click", function(event){        var cartStr = "[";        for( var item in cart ){            cartStr += JSON.stringify( cart[item] ) + ",";        }        cartStr = cartStr.slice(0,-1);        cartStr += "]";        localStorage['cart'] = cartStr;    });    $('#loadOrder').on("click", function(event){        var obj = JSON.parse( localStorage['cart'] );        for( var item in obj ){            pid = obj[item].pid;        }    });});